/*
 * To change this license header, choose License Headers in Project Properties.
 * To change this template file, choose Tools | Templates
 * and open the template in the editor.
 */
package com.mycompany.spectralflask;

import java.io.File;
import java.io.FileNotFoundException;
import java.io.FileWriter;
import java.io.IOException;
import java.util.Scanner;
import javax.swing.JOptionPane;

/**
 *
 * @author user-pc
 */
public class clsSpectralFlask extends javax.swing.JFrame {

    double dRG, dWB, dNS, dMR, dVT, dAmt, dDiff;
    String sText, txtLoc, sData, sRG, sWB, sNS, sMR, sVT, sDiff;
    int iLocRG, iLocWB, iLocNS, iLocMR, iLocVT, iLocDiff;
    /**
     * Creates new form clsSpectralFlask
     */
    public clsSpectralFlask() {
        initComponents();
    }

    /**
     * This method is called from within the constructor to initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is always
     * regenerated by the Form Editor.
     */
    @SuppressWarnings("unchecked")
    // <editor-fold defaultstate="collapsed" desc="Generated Code">                          
    private void initComponents() {

        btnSave = new javax.swing.JButton();
        teRG = new javax.swing.JTextField();
        teWB = new javax.swing.JTextField();
        teNS = new javax.swing.JTextField();
        teMR = new javax.swing.JTextField();
        teVT = new javax.swing.JTextField();
        lblRG = new javax.swing.JLabel();
        lblMR = new javax.swing.JLabel();
        lblWB = new javax.swing.JLabel();
        lblVT = new javax.swing.JLabel();
        lblNS = new javax.swing.JLabel();
        lblAmt = new javax.swing.JLabel();
        teDiff = new javax.swing.JTextField();
        lblFlaskPrice = new javax.swing.JLabel();
        lblDiff = new javax.swing.JLabel();
        lblDiffTitle = new javax.swing.JLabel();

        setDefaultCloseOperation(javax.swing.WindowConstants.EXIT_ON_CLOSE);
        addWindowListener(new java.awt.event.WindowAdapter() {
            public void windowActivated(java.awt.event.WindowEvent evt) {
                formWindowActivated(evt);
            }
            public void windowOpened(java.awt.event.WindowEvent evt) {
                formWindowOpened(evt);
            }
        });

        btnSave.setText("Save");
        btnSave.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btnSaveActionPerformed(evt);
            }
        });

        teRG.setText("0");
        teRG.addKeyListener(new java.awt.event.KeyAdapter() {
            public void keyReleased(java.awt.event.KeyEvent evt) {
                teRGKeyReleased(evt);
            }
        });

        teWB.setText("0");
        teWB.addKeyListener(new java.awt.event.KeyAdapter() {
            public void keyReleased(java.awt.event.KeyEvent evt) {
                teWBKeyReleased(evt);
            }
        });

        teNS.setText("0");
        teNS.addFocusListener(new java.awt.event.FocusAdapter() {
            public void focusGained(java.awt.event.FocusEvent evt) {
                teNSFocusGained(evt);
            }
        });
        teNS.addKeyListener(new java.awt.event.KeyAdapter() {
            public void keyPressed(java.awt.event.KeyEvent evt) {
                teNSKeyPressed(evt);
            }
            public void keyReleased(java.awt.event.KeyEvent evt) {
                teNSKeyReleased(evt);
            }
            public void keyTyped(java.awt.event.KeyEvent evt) {
                teNSKeyTyped(evt);
            }
        });

        teMR.setText("0");
        teMR.addKeyListener(new java.awt.event.KeyAdapter() {
            public void keyReleased(java.awt.event.KeyEvent evt) {
                teMRKeyReleased(evt);
            }
        });

        teVT.setText("0");
        teVT.addKeyListener(new java.awt.event.KeyAdapter() {
            public void keyReleased(java.awt.event.KeyEvent evt) {
                teVTKeyReleased(evt);
            }
        });

        lblRG.setText("Rising Glory");

        lblMR.setText("Marrowroot");

        lblWB.setText("Widowbloom");

        lblVT.setText("Vigil's Torch");

        lblNS.setText("Nightshade");

        lblAmt.setText("0");

        teDiff.setText("0");
        teDiff.addKeyListener(new java.awt.event.KeyAdapter() {
            public void keyReleased(java.awt.event.KeyEvent evt) {
                teDiffKeyReleased(evt);
            }
        });

        lblFlaskPrice.setText("Price of Flasks");

        lblDiff.setText("0");

        lblDiffTitle.setText("Difference Amount");

        javax.swing.GroupLayout layout = new javax.swing.GroupLayout(getContentPane());
        getContentPane().setLayout(layout);
        layout.setHorizontalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, layout.createSequentialGroup()
                .addContainerGap()
                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addComponent(btnSave, javax.swing.GroupLayout.PREFERRED_SIZE, 100, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(lblWB)
                    .addComponent(lblRG)
                    .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.TRAILING, false)
                        .addComponent(teWB, javax.swing.GroupLayout.Alignment.LEADING, javax.swing.GroupLayout.DEFAULT_SIZE, 83, Short.MAX_VALUE)
                        .addComponent(teRG, javax.swing.GroupLayout.Alignment.LEADING)))
                .addGap(36, 36, 36)
                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING, false)
                    .addComponent(lblMR)
                    .addComponent(lblNS)
                    .addComponent(lblAmt, javax.swing.GroupLayout.PREFERRED_SIZE, 226, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addGroup(layout.createSequentialGroup()
                        .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.TRAILING, false)
                            .addComponent(lblFlaskPrice, javax.swing.GroupLayout.Alignment.LEADING, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                            .addComponent(teDiff, javax.swing.GroupLayout.Alignment.LEADING)
                            .addComponent(teMR)
                            .addComponent(teNS)
                            .addComponent(lblVT, javax.swing.GroupLayout.Alignment.LEADING, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                            .addComponent(teVT, javax.swing.GroupLayout.Alignment.LEADING))
                        .addGap(18, 18, 18)
                        .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                            .addComponent(lblDiff, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                            .addGroup(layout.createSequentialGroup()
                                .addComponent(lblDiffTitle)
                                .addGap(0, 0, Short.MAX_VALUE)))))
                .addContainerGap(javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
        );
        layout.setVerticalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(layout.createSequentialGroup()
                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addGroup(layout.createSequentialGroup()
                        .addGap(63, 63, 63)
                        .addComponent(lblRG)
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                        .addComponent(teRG, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                        .addComponent(lblWB)
                        .addGap(11, 11, 11)
                        .addComponent(teWB, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                        .addComponent(btnSave, javax.swing.GroupLayout.PREFERRED_SIZE, 91, javax.swing.GroupLayout.PREFERRED_SIZE))
                    .addGroup(layout.createSequentialGroup()
                        .addGap(27, 27, 27)
                        .addComponent(lblNS)
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                        .addComponent(teNS, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                        .addGap(9, 9, 9)
                        .addComponent(lblMR)
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                        .addComponent(teMR, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                        .addComponent(lblVT)
                        .addGap(11, 11, 11)
                        .addComponent(teVT, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED, 36, Short.MAX_VALUE)
                        .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                            .addComponent(lblFlaskPrice)
                            .addComponent(lblDiffTitle))
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                        .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                            .addComponent(teDiff, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                            .addComponent(lblDiff, javax.swing.GroupLayout.PREFERRED_SIZE, 20, javax.swing.GroupLayout.PREFERRED_SIZE))
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                        .addComponent(lblAmt, javax.swing.GroupLayout.PREFERRED_SIZE, 30, javax.swing.GroupLayout.PREFERRED_SIZE)
                        .addGap(5, 5, 5)))
                .addContainerGap())
        );

        pack();
        setLocationRelativeTo(null);
    }// </editor-fold>                        

    private void formWindowActivated(java.awt.event.WindowEvent evt) {                                     

    }                                    

    private void btnSaveActionPerformed(java.awt.event.ActionEvent evt) {                                        
        
        File fnew = new File("FlaskInfo.txt");
        
        sText = "RG:" + teRG.getText() + "\n"
            + "WB:" + teWB.getText() + "\n"
            + "NS:" + teNS.getText() + "\n"
            + "MR:" + teMR.getText() + "\n"
            + "VT:" + teVT.getText() + "\n"
            + "Diff:" + teDiff.getText();
        try {
            FileWriter fw = new FileWriter(fnew, false);
            fw.write(sText);
            fw.close();
        } catch (IOException e) {
            System.out.println(e);
        }
    }                                       

    private void teNSKeyPressed(java.awt.event.KeyEvent evt) {                                
        
    }                               

    private void teNSKeyTyped(java.awt.event.KeyEvent evt) {                              
        
    }                             

    private void teNSKeyReleased(java.awt.event.KeyEvent evt) {                                 
        calcTotal();
    }                                

    private void teRGKeyReleased(java.awt.event.KeyEvent evt) {                                 
        calcTotal();
    }                                

    private void teMRKeyReleased(java.awt.event.KeyEvent evt) {                                 
        calcTotal();
    }                                

    private void teWBKeyReleased(java.awt.event.KeyEvent evt) {                                 
        calcTotal();
    }                                

    private void teVTKeyReleased(java.awt.event.KeyEvent evt) {                                 
        calcTotal();
    }                                

    private void teDiffKeyReleased(java.awt.event.KeyEvent evt) {                                   
        calcTotal();
    }                                  

    private void formWindowOpened(java.awt.event.WindowEvent evt) {                                  
        teRG.setText("0");
        teWB.setText("0");
        teNS.setText("0");
        teMR.setText("0");
        teVT.setText("0");
        teDiff.setText("0");
        
        txtLoc = "FlaskInfo.txt";

        try {
            File fileLoc = new File(txtLoc);
            Scanner myReader = new Scanner(fileLoc);
            while (myReader.hasNextLine()) {
                sData = sData + myReader.nextLine(); //nullRG:030WB:030NS:030MR:030VT:030Diff:0750
            }
            myReader.close();
        } catch (FileNotFoundException e) {
            JOptionPane.showMessageDialog(null, """
                                                FlaskInfo.txt could not be found.
                                                Resetting values to zero(0).""");
        }
        
        try {
            iLocRG = sData.indexOf("RG:");
            iLocWB = sData.indexOf("WB:");
            iLocNS = sData.indexOf("NS:");
            iLocMR = sData.indexOf("MR:");
            iLocVT = sData.indexOf("VT:");
            iLocDiff = sData.indexOf("Diff:");
            
            sRG = sData.substring(iLocRG + 3, iLocWB);
            sWB = sData.substring(iLocWB + 3, iLocNS);
            sNS = sData.substring(iLocNS + 3, iLocMR);
            sMR = sData.substring(iLocMR + 3, iLocVT);
            sVT = sData.substring(iLocVT + 3, iLocDiff);
            sDiff = sData.substring(iLocDiff + 5);
            
            teRG.setText(sRG);
            teWB.setText(sWB);
            teNS.setText(sNS);
            teMR.setText(sMR);
            teVT.setText(sVT);
            teDiff.setText(sDiff);
            
            calcTotal();
        } catch (Exception e) {
            System.out.println(e);
        }
    }                                 

    private void teNSFocusGained(java.awt.event.FocusEvent evt) {                                 
        // TODO add your handling code here:
    }                                

    private void calcTotal() {
        try {
            dRG = Double.parseDouble(teRG.getText()) * 4;
            dWB = Double.parseDouble(teWB.getText()) * 4;
            dNS = Double.parseDouble(teNS.getText()) * 3;
            dMR = Double.parseDouble(teMR.getText()) * 4;
            dVT = Double.parseDouble(teVT.getText()) * 4;
            dDiff = Double.parseDouble(teDiff.getText()) - dAmt;
            dAmt = dRG + dWB + dNS + dMR + dVT;
            lblAmt.setText(dAmt + " Gold");
            lblDiff.setText(dDiff + " Gold");
        } catch (NumberFormatException e) {
            lblAmt.setText("Err: " + e);
            lblDiff.setText("Err: " + e);
        }
    }
    /**
     * @param args the command line arguments
     */
    public static void main(String args[]) {
        /* Set the Nimbus look and feel */
        //<editor-fold defaultstate="collapsed" desc=" Look and feel setting code (optional) ">
        /* If Nimbus (introduced in Java SE 6) is not available, stay with the default look and feel.
         * For details see http://download.oracle.com/javase/tutorial/uiswing/lookandfeel/plaf.html 
         */
        //</editor-fold>

        /* Create and display the form */
        java.awt.EventQueue.invokeLater(new Runnable() {
            public void run() {
                new clsSpectralFlask().setVisible(true);
            }
        });
    }

    // Variables declaration - do not modify                     
    private javax.swing.JButton btnSave;
    private javax.swing.JLabel lblAmt;
    private javax.swing.JLabel lblDiff;
    private javax.swing.JLabel lblDiffTitle;
    private javax.swing.JLabel lblFlaskPrice;
    private javax.swing.JLabel lblMR;
    private javax.swing.JLabel lblNS;
    private javax.swing.JLabel lblRG;
    private javax.swing.JLabel lblVT;
    private javax.swing.JLabel lblWB;
    private javax.swing.JTextField teDiff;
    private javax.swing.JTextField teMR;
    private javax.swing.JTextField teNS;
    private javax.swing.JTextField teRG;
    private javax.swing.JTextField teVT;
    private javax.swing.JTextField teWB;
    // End of variables declaration                   
}
